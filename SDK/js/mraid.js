var callbacks={},customCloseIdMap={},expandPropertiesMap={},resizePropertiesMap={},screenSize={},maxSize={},currentPosition={},defaultPosition={},viewable=!1;function RP(){}RP.prototype.initSDK=function(a){var b=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("initSDKForId",b);"function"===typeof a&&(callbacks[b]=a)};RP.prototype.useCustomClose=function(a){var b=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("useCustomClose",b);customCloseIdMap[b]={useCustomClose:a}};
RP.prototype.close=function(a){var b=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("close",b);"function"===typeof a&&(callbacks[b]=a)};RP.prototype.expand=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("expand",c);b.url=a;expandPropertiesMap[c]=b};RP.prototype.resize=function(a){var b=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("resize",b);resizePropertiesMap[b]=a};
RP.prototype.changeOrientationProperties=function(a){(new NativeBridge).callNativeMethodWithParameter("changeOrientationProperties",JSON.stringify(a))};RP.getScreenSize=function(){return screenSize};RP.setScreenSize=function(a){screenSize=a};RP.getMaxSize=function(){return maxSize};RP.setMaxSize=function(a){maxSize=a};RP.getCurrentPosition=function(){return currentPosition};RP.setCurrentPosition=function(a){currentPosition=a};RP.getDefaultPosition=function(){return defaultPosition};
RP.setDefaultPosition=function(a){defaultPosition=a};RP.isViewable=function(){return viewable};RP.setViewable=function(a){viewable=a};RP.callCallbackWithId=function(a,b){var c=callbacks[a];"function"===typeof c&&(c(b),callbacks[a]=null)};RP.getCustomCloseWithId=function(a){var b=customCloseIdMap[a];customCloseIdMap[a]=null;return JSON.stringify(b)};RP.getExpandPropertiesWithId=function(a){var b=expandPropertiesMap[a];expandPropertiesMap[a]=null;return JSON.stringify(b)};
RP.getResizePropertiesWithId=function(a){var b=resizePropertiesMap[a];resizePropertiesMap[a]=null;return JSON.stringify(b)};function RPCalendarEvent(){this.startDate;this.endDate;this.allDay;this.title;this.timezone;this.location;this.notes;this.url}RPCalendarEvent.prototype.setDate=function(a,b){this.startDate=a;this.endDate=b};RPCalendarEvent.prototype.getEvent=function(){return this};callbacks={};function RPCalendarEventKit(){}RPCalendarEventKit.prototype.newEvent=function(){return new RPCalendarEvent};
RPCalendarEventKit.prototype.addEventToUserCalendar=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("addEventToUserCalendar",c);RPCalendarEventKit.setEventWithId(a,c);"function"===typeof b&&this.registerCalllback(b,c)};RPCalendarEventKit.eventIdMap={};RPCalendarEventKit.prototype.registerCalllback=function(a,b){callbacks[b]=a};RPCalendarEventKit.setEventWithId=function(a,b){RPCalendarEventKit.eventIdMap[b]=a};
RPCalendarEventKit.getEventWithId=function(a){var b=RPCalendarEventKit.eventIdMap[a];RPCalendarEventKit.eventIdMap[a]=null;return JSON.stringify(b)};RPCalendarEventKit.callCallbackWithId=function(a,b){var c=callbacks[a];"function"===typeof c&&(c(b),callbacks[a]=null)};function NativeBridge(){}NativeBridge.prototype.callNativeMethod=function(a){window.location="objc: "+a};NativeBridge.prototype.callNativeMethodWithParameter=function(a,b){window.location="objc: "+a+"&"+b};
var callbacks={},urlIdMap={};function RPModalKit(){}RPModalKit.prototype.pushUrl=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("pushURL",c);this.setURLWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};RPModalKit.prototype.openUrl=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("openURL",c);this.setURLWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};
RPModalKit.prototype.showVideoPlayer=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("showVideoPlayer",c);this.setURLWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};RPModalKit.prototype.storePicture=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("storePicture",c);this.setURLWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};RPModalKit.prototype.setURLWithId=function(a,b){urlIdMap[b]=a};
RPModalKit.prototype.registerCallback=function(a,b){callbacks[b]=a};RPModalKit.getURLWithId=function(a){var b=urlIdMap[a];urlIdMap[a]=null;return JSON.stringify(b)};RPModalKit.callCallbackWithId=function(a,b){var c=callbacks[a];"function"===typeof c&&(c(b),callbacks[a]=null)};var callbacks={},shareableIdMap={};function RPShareKit(){}
RPShareKit.prototype.shareToFacebook=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("shareToFacebook",c);this.setShareableWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};RPShareKit.prototype.shareToTwitter=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("shareToTwitter",c);this.setShareableWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};
RPShareKit.prototype.shareDialog=function(a,b){var c=(new Date).getTime();(new NativeBridge).callNativeMethodWithParameter("shareDialog",c);this.setShareableWithId(a,c);"function"===typeof b&&this.registerCallback(b,c)};RPShareKit.prototype.setShareableWithId=function(a,b){shareableIdMap[b]=a};RPShareKit.prototype.registerCallback=function(a,b){callbacks[b]=a};RPShareKit.getShareableWithId=function(a){var b=shareableIdMap[a];shareableIdMap[a]=null;return JSON.stringify(b)};
RPShareKit.callCallbackWithId=function(a,b){(0,callbacks[a])(b);callbacks[a]=null};function RPShareableMessage(){this.message;this.shortMessage;this.imageUrl;this.url;this.appId}function RPURLMessage(){this.url}
(function(){var a=window.mraid={},b=a.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",RESIZED:"resized",HIDDEN:"hidden"},c=b.LOADING,m=a.PLACEMENT_TYPES={UNKNOWN:"unknown",INLINE:"inline",INTERSTITIAL:"interstitial"},r="top-left top-right center bottom-left bottom-right top-center bottom-center".split(" "),k=m.UNKNOWN,n={},e={width:-1,height:-1,useCustomClose:!1,isModal:!0},p=a.ORIENTATIONS={portrait:"portrait",landscape:"landscape",none:"none"},g={allowOrientationChange:!0,forceOrientation:p.none},
f=void 0,h=-1,q=-1,d=function(b,c,d){for(var e in b)b[e].apply(a,[c,d])},j=function(b,c){return function(e){e||d(a.listeners.error,b,c)}};a.supports=function(a){a=n[a];return void 0===a?!1:a};a.getState=function(){return c};a.getVersion=function(){return"2.0"};a.getPlacementType=function(){return k};a.resetEventListeners=function(){this.listeners={ready:[],error:[],stateChange:[],viewableChange:[],sizeChange:[]}};a.resetEventListeners();a.addEventListener=function(a,b){if(!this.listeners[a])throw"Event "+
a+" is not supported";if("function"!==typeof b)throw"Listener must be a function";this.listeners[a].push(b)};a.removeEventListener=function(a,b){if(!this.listeners[a])throw"Event "+a+" is not supported";if(b){if("function"!==typeof b)throw"Listener must be a function";var c=this.listeners[a],d=c.indexOf(b);-1!==d&&c.splice(d,1)}else this.listeners[a]=[]};a.open=function(a){var b=new RPURLMessage;b.url=a;(new RPModalKit).pushUrl(b,j("Error when opening URL. Check if it is correct.","open"))};a.playVideo=
function(a){var b=new RPURLMessage;b.url=a;(new RPModalKit).showVideoPlayer(b,j("Error when playing video. Check if the URL is correct.","playVideo"))};a.createCalendarEvent=function(a){var b=new RPCalendarEventKit,c=b.newEvent(),d=Date.parse(a.start);d&&(c.startDate=new Date(d));if(d=Date.parse(a.end))c.endDate=new Date(d);c.title=a.description;c.location=a.location;c.notes=a.summary;c.alert=a.reminder;b.addEventToUserCalendar(c,j("Error when creating calendar event.","createCalendarEvent"))};a.storePicture=
function(a){var b=new RPURLMessage;b.url=a;(new RPModalKit).storePicture(b,j("Error when storing picture. Check if the URL is correct.","storePicture"))};a.useCustomClose=function(a){(new RP).useCustomClose(a);e.useCustomClose=a};a.close=function(){(new RP).close(function(l){l?(c===b.EXPANDED?c=b.DEFAULT:(c=b.HIDDEN,RP.onViewableChange(!1)),d(a.listeners.stateChange,c)):d(a.listeners.error,"Error when closing the ad","close")})};a.expand=function(l){c===b.EXPANDED?d(a.listeners.error,"Error when expanding the ad. Check if the ad is not already expanded.",
"expand"):k===m.INTERSTITIAL?d(a.listeners.error,"Error when expanding the ad. Check if the ad isn't an interstitial ad.","expand"):((new RP).expand(l,e),c=b.EXPANDED,d(a.listeners.stateChange,c))};a.setExpandProperties=function(b){void 0===b.useCustomClose||!(!0===b.useCustomClose||!1===b.useCustomClose)?d(a.listeners.error,"Error when setting expand properties. Check if the properties are valid.","setExpandProperties"):(e.width=b.width?b.width:-1,e.height=b.height?b.height:-1,e.useCustomClose=b.useCustomClose)};
a.getExpandProperties=function(){return{width:-1==e.width?h:e.width,height:-1==e.height?h:e.height,useCustomClose:e.useCustomClose,isModal:e.isModal}};a.getSize=function(){return{height:q,width:h}};a.getScreenSize=function(){return RP.getScreenSize()};a.getMaxSize=function(){return RP.getMaxSize()};a.getCurrentPosition=function(){return RP.getCurrentPosition()};a.getDefaultPosition=function(){return RP.getDefaultPosition()};a.isViewable=function(){return RP.isViewable()};a.getOrientationProperties=
function(){return{allowOrientationChange:g.allowOrientationChange,forceOrientation:g.forceOrientation}};a.setOrientationProperties=function(b){var c=p[b.forceOrientation];b=b.allowOrientationChange;!c||!(!0===b||!1===b)?d(a.listeners.error,"Error when setting orientation properties. Check if the properties are valid.","setOrientationProperties"):(g.allowOrientationChange=b,g.forceOrientation=c,(new RP).changeOrientationProperties(g))};a.setResizeProperties=function(b){b?!b.height||!b.width?d(a.listeners.error,
"Error when setting resize properties. Check if the properties are valid.","setResizeProperties"):(0>r.indexOf(b.customClosePosition)&&(b.customClosePosition="top-right"),f={width:b.width,height:b.height,customClosePosition:b.customClosePosition,offsetX:b.offsetX||0,offsetY:b.offsetY||0,allowOffscreen:void 0==b.allowOffscreen?!0:b.allowOffscreen}):f=void 0};a.getResizeProperties=function(){return!f?void 0:{width:f.width,height:f.height,customClosePosition:f.customClosePosition,offsetX:f.offsetX,offsetY:f.offsetY,
allowOffscreen:f.allowOffscreen}};a.resize=function(){f?c===b.EXPANDED?d(a.listeners.error,"Error when resizing the ad. Check if the ad is not expanded.","resize"):((new RP).resize(f),c=b.RESIZED,d(a.listeners.stateChange,c)):d(a.listeners.error,"Error when resizing the ad. Check if the resize properties are set.","resize")};RP.onStateChange=function(b){c=b;d(a.listeners.stateChange,c)};RP.onSizeChange=function(b){h=b.width;q=b.height;d(a.listeners.sizeChange,b.width,b.height)};RP.onViewableChange=
function(b){RP.isViewable()!=b&&(RP.setViewable(b),d(a.listeners.viewableChange,b))};document.addEventListener("DOMContentLoaded",function(){(new RP).initSDK(function(e){e?(k=e.placementType,n=e.deviceFeatures,e.state?c=e.state:(c=b.DEFAULT,d(a.listeners.stateChange,c)),d(a.listeners.ready,"Republic SDK initialized with success","init")):d(a.listeners.error,"Error when initializing Republic SDK","init")})})})();
